configVersion: 1
project: "web-client"
---
image: web
from: node:16-alpine
docker:
  WORKDIR: /frontend
  ENTRYPOINT: ["yarn", "dev"]
git:
  - add: /
    to: /frontend
    stageDependencies:
      install:
        - package.json
        - yarn.lock
      setup:
        - "**/*"
shell:
  beforeInstall:
    - apk --no-cache --update --virtual build-dependencies add python3 make g++
  install:
    - cd /frontend
    #- yarn autoclean --init
    #- yarn autoclean --force
    - yarn install
  setup:
    - cd /frontend
    - yarn generate
